{"version":3,"sources":["../source/Tooltip.js"],"names":["PureComponent","Component","Tooltip","state","show","animate","hide_timeout","clearTimeout","undefined","tooltip","classList","remove","create_tooltip","setState","isShown","calculate_coordinates","x","y","style","left","top","add","hide","hidingAnimationDuration","props","setTimeout","destroy_tooltip","on_mouse_enter","content","mobile","createPortal","show_timeout","delay","on_mouse_leave","window","rruiCollapseOnFocusOut","on_touch_start","storeOriginNode","ref","origin","tooltipClassName","placement","document","createElement","position","split","className","container","appendChild","parentNode","removeChild","width","offsetWidth","height","offsetHeight","fitOnScreen","inline","children","inline_style","propTypes","oneOf","isRequired","node","bool","number","func","object","string","defaultProps","body","minimal_margin","innerWidth","pageYOffset","innerHeight","display"],"mappings":"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","file":"Tooltip.js","sourcesContent":["import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nimport { getOffset } from './utility/dom'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\n// https://github.com/Dogfalo/materialize/blob/master/js/tooltip.js\r\nexport default class Tooltip extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// Tooltip placement.\r\n\t\tplacement : PropTypes.oneOf([\r\n\t\t\t'top',\r\n\t\t\t'left',\r\n\t\t\t'bottom',\r\n\t\t\t'right'\r\n\t\t]).isRequired,\r\n\r\n\t\t// Tooltip content.\r\n\t\tcontent : PropTypes.node,\r\n\r\n\t\t// Whether this element should be displayed as `inline-block`.\r\n\t\t// (is `true` by default)\r\n\t\tinline : PropTypes.bool.isRequired,\r\n\r\n\t\t// The delay before the tooltip is shown (in milliseconds)\r\n\t\tdelay : PropTypes.number.isRequired,\r\n\r\n\t\t// The duration of the tooltip hiding animation.\r\n\t\t// The DOM element will retain `display: block` for this time period.\r\n\t\t// When changing this timeout also change `transition` time for\r\n\t\t// `.tooltip--after-show` and `.tooltip--before-hide` CSS classes.\r\n\t\t// Is `120` by default.\r\n\t\thidingAnimationDuration : PropTypes.number.isRequired,\r\n\r\n\t\t// `container: () => DOMElement` property is optional\r\n\t\t// and is gonna be the parent DOM Element for the tooltip itself\r\n\t\t// (`document.body` by default).\r\n\t\t// (in which case make sure that `document.body` has no `margin`\r\n\t\t//  otherwise tooltip `left` and `top` positions will be slightly off).\r\n\t\tcontainer : PropTypes.func,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle : PropTypes.object,\r\n\r\n\t\t// CSS class name\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// Tooltip CSS class name\r\n\t\ttooltipClassName : PropTypes.string\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\tplacement: 'top',\r\n\t\tinline: true,\r\n\t\tdelay: 400, // in milliseconds\r\n\t\thidingAnimationDuration: 200, // in milliseconds\r\n\t\tcontainer: () => document.body\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\t// componentDidMount()\r\n\t// {\r\n\t// \tthis.create_tooltip()\r\n\t// }\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tclearTimeout(this.show_timeout)\r\n\t\tclearTimeout(this.hide_timeout)\r\n\r\n\t\tthis.destroy_tooltip()\r\n\t}\r\n\r\n\tcreate_tooltip()\r\n\t{\r\n\t\tconst { tooltipClassName, placement } = this.props\r\n\r\n\t\tthis.tooltip = document.createElement('div')\r\n\r\n\t\tthis.tooltip.style.position = 'absolute'\r\n\t\tthis.tooltip.style.left = 0\r\n\t\tthis.tooltip.style.top  = 0\r\n\r\n\t\tthis.tooltip.classList.add('rrui__tooltip')\r\n\t\tthis.tooltip.classList.add(`rrui__tooltip--${placement}`)\r\n\r\n\t\tif (tooltipClassName) {\r\n\t\t\tfor (const className of tooltipClassName.split(/\\s+/)) {\r\n\t\t\t\tthis.tooltip.classList.add(className)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.container().appendChild(this.tooltip)\r\n\t}\r\n\r\n\tdestroy_tooltip()\r\n\t{\r\n\t\tif (this.tooltip)\r\n\t\t{\r\n\t\t\t// Won't throw an exception\r\n\t\t\tthis.tooltip.parentNode.removeChild(this.tooltip)\r\n\t\t\tthis.tooltip = undefined\r\n\t\t}\r\n\t}\r\n\r\n\tcontainer()\r\n\t{\r\n\t\tconst { container } = this.props\r\n\t\treturn container()\r\n\t}\r\n\r\n\tcalculate_coordinates()\r\n\t{\r\n\t\tconst { placement } = this.props\r\n\r\n\t\tconst width  = this.tooltip.offsetWidth\r\n\t\tconst height = this.tooltip.offsetHeight\r\n\r\n\t\tconst origin = getOffset(this.origin)\r\n\r\n\t\tlet top\r\n\t\tlet left\r\n\r\n\t\tswitch (placement) {\r\n\t\t\tcase 'top':\r\n\t\t\t\ttop = origin.top - height\r\n\t\t\t\tbreak\r\n\t\t\tcase 'bottom':\r\n\t\t\t\ttop = origin.top + origin.height\r\n\t\t\t\tbreak\r\n\t\t\tcase 'left':\r\n\t\t\t\tleft = origin.left - width\r\n\t\t\t\tbreak\r\n\t\t\tcase 'right':\r\n\t\t\t\tleft = origin.left + origin.width\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\tswitch (placement) {\r\n\t\t\tcase 'top':\r\n\t\t\tcase 'bottom':\r\n\t\t\t\tswitch (placement) {\r\n\t\t\t\t\t// Default: \"center\".\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tleft = origin.left + (origin.width - width) / 2\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tcase 'left':\r\n\t\t\tcase 'right':\r\n\t\t\t\tswitch (placement) {\r\n\t\t\t\t\t// Default: \"center\".\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\ttop = origin.top + (origin.height - height) / 2\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\treturn fitOnScreen(\r\n\t\t\tleft,\r\n\t\t\ttop - getOffset(this.container()).top,\r\n\t\t\twidth,\r\n\t\t\theight\r\n\t\t)\r\n\t}\r\n\r\n\tshow = () =>\r\n\t{\r\n\t\t// Play tooltip showing animation\r\n\t\tlet animate = false\r\n\r\n\t\t// If hiding animation is being played,\r\n\t\t// then cancel it, and cancel setting\r\n\t\t// `display` to `none` after it finishes playing.\r\n\t\tif (this.hide_timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this.hide_timeout)\r\n\t\t\tthis.hide_timeout = undefined\r\n\r\n\t\t\t// Abort tooltip hiding animation.\r\n\t\t\t// It will automatically return to the \"showing\" state.\r\n\t\t\tthis.tooltip.classList.remove('rrui__tooltip--before-hide')\r\n\t\t}\r\n\t\t// Otherwise, the tooltip is hidden (or never been shown)\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Not creating in `componentDidMount()`\r\n\t\t\t// therefore create it here.\r\n\t\t\tif (!this.tooltip)\r\n\t\t\t{\r\n\t\t\t\tthis.create_tooltip()\r\n\t\t\t}\r\n\r\n\t\t\t// Play tooltip showing animation\r\n\t\t\tanimate = true\r\n\t\t}\r\n\r\n\t\t// Now that `this.tooltip` has been created,\r\n\t\t// re-render the component so that `ReactDOM.createPortal()` is called.\r\n\t\tthis.setState({ isShown: true }, () =>\r\n\t\t{\r\n\t\t\tconst { x, y } = this.calculate_coordinates()\r\n\r\n\t\t\tthis.tooltip.style.left = `${x}px`\r\n\t\t\tthis.tooltip.style.top  = `${y}px`\r\n\r\n\t\t\t// Play tooltip showing animation\r\n\t\t\t// (doing it after setting position because\r\n\t\t\t//  setting position applies `display: block`)\r\n\t\t\tif (animate)\r\n\t\t\t{\r\n\t\t\t\tthis.tooltip.classList.add('rrui__tooltip--after-show')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\thide = () =>\r\n\t{\r\n\t\tconst { hidingAnimationDuration } = this.props\r\n\r\n\t\t// If already hiding, or if already hidden, then do nothing.\r\n\t\t// if (this.hide_timeout || this.tooltip.style.display === 'none')\r\n\t\tif (this.hide_timeout || !this.tooltip)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Play tooltip hiding animation\r\n\t\tthis.tooltip.classList.add('rrui__tooltip--before-hide')\r\n\r\n\t\t// Set the tooltip to `display: none`\r\n\t\t// after its hiding animation finishes.\r\n\t\tthis.hide_timeout = setTimeout(() =>\r\n\t\t{\r\n\t\t\tthis.hide_timeout = undefined\r\n\t\t\tthis.destroy_tooltip()\r\n\t\t\tthis.setState({ isShown: false })\r\n\t\t},\r\n\t\thidingAnimationDuration)\r\n\t}\r\n\r\n\ton_mouse_enter = () =>\r\n\t{\r\n\t\tconst { content } = this.props\r\n\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.mobile)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// If the tooltip has no content\r\n\t\t// (e.g. `react-time-ago` first render)\r\n\t\t// or if React Portal API is not available\r\n\t\t// then don't show the tooltip.\r\n\t\tif (!content || !ReactDOM.createPortal)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Shouldn't happen, because\r\n\t\t// `mouse leave` event clears this timeout.\r\n\t\tif (this.show_timeout)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst { delay } = this.props\r\n\r\n\t\t// Don't show the tooltip immediately\r\n\t\t// but rather wait for the user to\r\n\t\t// \"mouse over\" it for a short time interval.\r\n\t\t// (prevents false positives)\r\n\t\tthis.show_timeout = setTimeout(() =>\r\n\t\t{\r\n\t\t\tthis.show_timeout = undefined\r\n\t\t\tthis.show()\r\n\t\t},\r\n\t\tdelay)\r\n\t}\r\n\r\n\ton_mouse_leave = () =>\r\n\t{\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.mobile)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// If tooltip hasn't been shown yet,\r\n\t\t// then cancel showing it.\r\n\t\tif (this.show_timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this.show_timeout)\r\n\t\t\tthis.show_timeout = undefined\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Otherwise, the tooltip is shown, so hide it.\r\n\t\t//\r\n\t\t// `window.rruiCollapseOnFocusOut` can be used\r\n\t\t// for debugging expandable contents.\r\n\t\tif (window.rruiCollapseOnFocusOut !== false) {\r\n\t\t\tthis.hide()\r\n\t\t}\r\n\t}\r\n\r\n\ton_touch_start = () =>\r\n\t{\r\n\t\tconst { content } = this.props\r\n\r\n\t\t// mouse enter events won't be processed from now on\r\n\t\tthis.mobile = true\r\n\r\n\t\t// If the tooltip has no content\r\n\t\t// (e.g. `react-time-ago` first render)\r\n\t\t// or if React Portal API is not available\r\n\t\t// then don't show the tooltip.\r\n\t\tif (!content || !ReactDOM.createPortal)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.show()\r\n\t}\r\n\r\n\tstoreOriginNode = (ref) => this.origin = ref\r\n\r\n\trender()\r\n\t{\r\n\t\t// Shows tooltip on mouse over when on desktop.\r\n\t\t// Shows tooltip on touch when on mobile.\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\tcontent,\r\n\t\t\tinline,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// `ReactDOM.createPortal()` requires React >= 16.\r\n\t\t// If it's not available then it won't show the tooltip.\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={ this.storeOriginNode }\r\n\t\t\t\tonMouseEnter={ this.on_mouse_enter }\r\n\t\t\t\tonMouseLeave={ this.on_mouse_leave }\r\n\t\t\t\tonTouchStart={ this.on_touch_start }\r\n\t\t\t\tonTouchMove={ this.hide }\r\n\t\t\t\tonTouchEnd={ this.hide }\r\n\t\t\t\tonTouchCancel={ this.hide }\r\n\t\t\t\tstyle={ inline ? (style ? { ...inline_style, ...style } : inline_style) : style }\r\n\t\t\t\tclassName={ classNames('rrui__tooltip__target', className) }>\r\n\t\t\t\t{ children }\r\n\t\t\t\t{ this.tooltip && content && ReactDOM.createPortal && ReactDOM.createPortal(content, this.tooltip) }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction fitOnScreen(x, y, width, height)\r\n{\r\n\tconst minimal_margin = 4 // in pixels\r\n\r\n\tif (x < minimal_margin)\r\n\t{\r\n\t\tx = minimal_margin\r\n\t}\r\n\telse if (x + width + minimal_margin > window.innerWidth)\r\n\t{\r\n\t\tx -= (x + width + minimal_margin) - window.innerWidth\r\n\t}\r\n\r\n\tif (y < window.pageYOffset + minimal_margin)\r\n\t{\r\n\t\ty = window.pageYOffset + minimal_margin\r\n\t}\r\n\telse if (y + height + minimal_margin > window.pageYOffset + window.innerHeight)\r\n\t{\r\n\t\ty -= (y + height + minimal_margin) - (window.pageYOffset + window.innerHeight)\r\n\t}\r\n\r\n\treturn { x, y }\r\n}\r\n\r\nconst inline_style =\r\n{\r\n\tdisplay : 'inline-block'\r\n}"]}