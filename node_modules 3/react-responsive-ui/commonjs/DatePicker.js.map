{"version":3,"sources":["../source/DatePicker.js"],"names":["PureComponent","Component","DatePicker","state","selected_day","expand","expandable","collapse","toggle","isExpanded","focus","input","focusCalendar","calendar","dayPicker","firstChild","userHasJustChangedYearOrMonth","_userHasJustChangedYearOrMonth","clearTimeout","userHasJustChangedYearOrMonthTimer","setTimeout","onInputFocus","event","onFocus","props","focusAfterDaySelected","onExpand","value","format","onToggle","setState","month","undefined","text_value","onExpanded","slice","call","container","querySelectorAll","button","setAttribute","querySelector","Date","onCollapse","focusOut","focusingOut","onContainerKeyDown","ctrlKey","altKey","shiftKey","metaKey","keyCode","preventDefault","onInputKeyDown","onKeyDown","defaultPrevented","onToggleButtonClick","then","onInputChange","onChange","previous_value","noon","utc","disabledDays","target","trim","dayMatchesModifier","getTime","showMonth","onDayClick","disabled","getFullYear","getMonth","getDate","convert_to_utc_timezone","getComputedStyle","inputOverlay","display","onMonthChange","onBlur","blurTimer","onFocusOut","preventBlur","window","rruiCollapseOnFocusOut","getContainerNode","storeContainerNode","node","storeExpandableRef","ref","storeCalendarComponent","storeInputOverlayNode","storeInputNode","storeInputContainerNode","inputContainer","id","error","indicateInvalid","selectYearsIntoPast","selectYearsIntoFuture","locale","localeUtils","months","weekdaysShort","weekdaysLong","firstDayOfWeek","required","label","placeholder","tabIndex","waitForKeyboardSlideIn","keyboardSlideInAnimationDuration","buttonAriaLabel","closeLabel","CloseButtonIcon","closeButtonIcon","icon","className","style","formatHint","captionElement","DEFAULT_CALENDAR_ICON","propTypes","string","number","isRequired","object","arrayOf","instanceOf","func","bool","name","oneOfType","array","defaultProps","iconStyle","width","height","fill"],"mappings":"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","file":"DatePicker.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport DayPicker, { ModifiersUtils } from 'react-day-picker'\r\nimport classNames from 'classnames'\r\n\r\nimport TextInput from './TextInputComponent'\r\nimport Expandable from './Expandable'\r\nimport YearMonthSelect from './YearMonthSelect'\r\nimport WithError from './WithError'\r\n\r\nimport { onBlurForReduxForm } from './utility/redux-form'\r\nimport { onBlur } from './utility/focus'\r\nimport { isInternetExplorer } from './utility/dom'\r\n\r\nimport { parseDate, formatDate, trimInvalidPart, normalizeDate } from './utility/date'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\n// Derived from `react-day-picker` example\r\n// http://react-day-picker.js.org/examples/?overlay\r\nexport default class DatePicker extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// (optional) HTML `id` attribute.\r\n\t\tid : PropTypes.string,\r\n\r\n\t\t// An optional label placed on top of the input field\r\n\t\tlabel : PropTypes.string,\r\n\r\n\t\t// `<input/>` placeholder\r\n\t\tplaceholder : PropTypes.string,\r\n\r\n\t\t// First day of week.\r\n\t\t// `0` means \"Sunday\", `1` means \"Monday\", etc.\r\n\t\t// (is `0` by default)\r\n\t\t// http://react-day-picker.js.org/docs/localization/\r\n\t\tfirstDayOfWeek : PropTypes.number.isRequired,\r\n\r\n\t\t// `react-day-picker` `locale`.\r\n\t\t// http://react-day-picker.js.org/docs/localization/\r\n\t\tlocale : PropTypes.string,\r\n\r\n\t\t// `react-day-picker` `localeUtils`.\r\n\t\t// http://react-day-picker.js.org/docs/localization/\r\n\t\tlocaleUtils : PropTypes.object,\r\n\r\n\t\t// Month labels.\r\n\t\t// http://react-day-picker.js.org/docs/localization/\r\n\t\tmonths : PropTypes.arrayOf(PropTypes.string),\r\n\r\n\t\t// Long weekday labels.\r\n\t\t// http://react-day-picker.js.org/docs/localization/\r\n\t\tweekdaysLong : PropTypes.arrayOf(PropTypes.string),\r\n\r\n\t\t// Short weekday labels.\r\n\t\t// http://react-day-picker.js.org/docs/localization/\r\n\t\tweekdaysShort : PropTypes.arrayOf(PropTypes.string),\r\n\r\n\t\t// Date format. Only supports `DD`, `MM`, `YY` and `YYYY` for now (to reduce bundle size).\r\n\t\t// Can support custom localized formats, perhaps, when `date-fns@2` is released.\r\n\t\t// (is US `MM/DD/YYYY` by default)\r\n\t\tformat : PropTypes.string.isRequired,\r\n\t\t// format : PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\r\n\r\n\t\t// Internationalization\r\n\t\t// locale : PropTypes.string,\r\n\r\n\t\t// The Date `value`\r\n\t\tvalue : PropTypes.instanceOf(Date),\r\n\r\n\t\t// Writes new `value`.\r\n\t\t// The `value` is in the user's time zone and the time is `00:00`.\r\n\t\tonChange : PropTypes.func.isRequired,\r\n\r\n\t\t// Is called when the date picker is either collapsed or expanded\r\n\t\tonToggle : PropTypes.func,\r\n\r\n\t\t// Is called when the input is focused\r\n\t\tonFocus : PropTypes.func,\r\n\r\n\t\t// Is called when the input is blurred.\r\n\t\t// This `onBlur` interceptor is a workaround for `redux-form`,\r\n\t\t// so that it gets the parsed `value` in its `onBlur` handler,\r\n\t\t// not the formatted text.\r\n\t\tonBlur : PropTypes.func,\r\n\r\n\t\t// Disables the input\r\n\t\tdisabled : PropTypes.bool,\r\n\r\n\t\t// Set to `true` to mark the field as required\r\n\t\trequired : PropTypes.bool.isRequired,\r\n\r\n\t\t// HTML `tabIndex` attribute\r\n\t\ttabIndex : PropTypes.number,\r\n\r\n\t\t// HTML `<input/>` `name` attribute\r\n\t\tname : PropTypes.string,\r\n\r\n\t\t// `react-day-picker`'s `disabledDays`.\r\n\t\t// http://react-day-picker.js.org/examples/disabled\r\n\t\tdisabledDays : PropTypes.oneOfType\r\n\t\t([\r\n\t\t\tPropTypes.object,\r\n\t\t\tPropTypes.func,\r\n\t\t\tPropTypes.array\r\n\t\t]),\r\n\r\n\t\t// How much years back can a user navigate using the year `<select/>`\r\n\t\tselectYearsIntoPast : PropTypes.number.isRequired,\r\n\r\n\t\t// How much years forward can a user navigate using the year `<select/>`\r\n\t\tselectYearsIntoFuture : PropTypes.number.isRequired,\r\n\r\n\t\t// Whether dates being selected should be in UTC+0 timezone.\r\n\t\t// (is `false` by default)\r\n\t\tutc : PropTypes.bool.isRequired,\r\n\r\n\t\t// Whether to set time to 12:00 for dates being selected.\r\n\t\t// (is `true` by default)\r\n\t\tnoon : PropTypes.bool.isRequired,\r\n\r\n\t\t// The calendar icon.\r\n\t\ticon : PropTypes.oneOfType([\r\n\t\t\tPropTypes.func,\r\n\t\t\tPropTypes.bool\r\n\t\t]),\r\n\r\n\t\t// `aria-label` attribute for the toggle calendar button.\r\n\t\tbuttonAriaLabel : PropTypes.string,\r\n\r\n\t\twaitForKeyboardSlideIn : PropTypes.bool.isRequired,\r\n\t\tkeyboardSlideInAnimationDuration : PropTypes.number.isRequired,\r\n\r\n\t\t// CSS class\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle : PropTypes.object\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\t// Default US format\r\n\t\tformat : 'MM/DD/YYYY',\r\n\r\n\t\t// locale: 'en-US',\r\n\t\tfirstDayOfWeek : 0,\r\n\r\n\t\t// Set to `true` to mark the field as required\r\n\t\trequired : false,\r\n\r\n\t\t// Show `error` (if passed).\r\n\t\tindicateInvalid : true,\r\n\r\n\t\t// Whether dates being selected should be in UTC+0 timezone\r\n\t\tutc : false,\r\n\r\n\t\t// Whether to set time to 12:00 for dates being selected\r\n\t\tnoon : true,\r\n\r\n\t\t// A sensible default.\r\n\t\tselectYearsIntoPast : 100,\r\n\t\tselectYearsIntoFuture : 100,\r\n\r\n\t\twaitForKeyboardSlideIn : true,\r\n\t\tkeyboardSlideInAnimationDuration : 300\r\n\t}\r\n\r\n\tstate =\r\n\t{\r\n\t\tselected_day : null\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tclearTimeout(this.userHasJustChangedYearOrMonthTimer)\r\n\t}\r\n\r\n\texpand     = () => this.expandable.expand()\r\n\tcollapse   = () => this.expandable.collapse()\r\n\ttoggle     = () => this.expandable.toggle()\r\n\tisExpanded = () => this.expandable.isExpanded()\r\n\r\n\tfocus = () => this.input.focus()\r\n\tfocusCalendar = () => this.calendar && this.calendar.dayPicker && this.calendar.dayPicker.firstChild.focus()\r\n\r\n\tuserHasJustChangedYearOrMonth = () =>\r\n\t{\r\n\t\tthis._userHasJustChangedYearOrMonth = true\r\n\t\tclearTimeout(this.userHasJustChangedYearOrMonthTimer)\r\n\t\tthis.userHasJustChangedYearOrMonthTimer = setTimeout(() => this._userHasJustChangedYearOrMonth = false, 50)\r\n\t}\r\n\r\n\tonInputFocus = (event) =>\r\n\t{\r\n\t\tconst { onFocus } = this.props\r\n\r\n\t\tif (onFocus) {\r\n\t\t\tonFocus(event)\r\n\t\t}\r\n\r\n\t\tif (!this.focusAfterDaySelected) {\r\n\t\t\tthis.expand()\r\n\t\t}\r\n\t}\r\n\r\n\tonExpand = () =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tvalue,\r\n\t\t\tformat,\r\n\t\t\tonToggle\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\t// Reset month for some unknown reason.\r\n\t\t\tmonth : undefined,\r\n\r\n\t\t\t// Must re-calculate `text_value` on each \"expand\"\r\n\t\t\t// because it's being reset on each \"collapse\".\r\n\t\t\ttext_value : formatDate(value, format),\r\n\r\n\t\t\t// For `aria-expanded`.\r\n\t\t\tisExpanded : true\r\n\t\t})\r\n\t}\r\n\r\n\tonExpanded = () =>\r\n\t{\r\n\t\tconst { value } = this.props\r\n\r\n\t\t// Set \"previous\" and \"next\" buttons untabbable\r\n\t\t// so that a Tab out of the `<input/>` field\r\n\t\t// moves cursor not inside to these buttons\r\n\t\t// but rather to the first day of the month. // next form input.\r\n\t\t//\r\n\t\t// (rewritten)\r\n\t\t// Requires ES6 Symbol.Iterator polyfill.\r\n\t\t// for (const button of calendar.querySelectorAll('.DayPicker-NavButton'))\r\n\t\t//\r\n\t\t// The user can still navigate via Up/Down arrow keys\r\n\t\t// when the focus is on a calendar date.\r\n\t\t// Or the user can enter the date in the `<input/>` text field.\r\n\t\t//\r\n\t\t// https://github.com/gpbl/react-day-picker/issues/848\r\n\t\t//\r\n\t\tfor (const button of [].slice.call(this.container.querySelectorAll('.DayPicker-NavButton'))) {\r\n\t\t\tbutton.setAttribute('tabindex', '-1')\r\n\t\t}\r\n\r\n\t\t// A workaround for a bug where `tabIndex` of the \"wrapper\" div is `0`\r\n\t\t// and at the same time there's no `aria-label`.\r\n\t\t// https://github.com/gpbl/react-day-picker/issues/848\r\n\t\tthis.container.querySelector('.DayPicker-wrapper').setAttribute('tabindex', -1)\r\n\t\t// Could also potentially update `aria-label` attribute to (month + year)\r\n\t\t// on expand and on month/year change in the expanded calendar.\r\n\t\t// But that would be too much hassle.\r\n\r\n\t\t// Toggling the calendar in a timeout\r\n\t\t// in order for iOS scroll not to get \"janky\"\r\n\t\t// when `<DatePicker/>` gets focused.\r\n\t\t// (for some unknown reason)\r\n\t\tsetTimeout(() =>\r\n\t\t{\r\n\t\t\tthis.setState\r\n\t\t\t({\r\n\t\t\t\tmonth : value ? normalizeDate(value) : new Date()\r\n\t\t\t})\r\n\t\t}, 0)\r\n\t}\r\n\r\n\t// Cancels textual date editing.\r\n\tonCollapse = ({ focusOut }) =>\r\n\t{\r\n\t\tif (!focusOut && !this.focusingOut) {\r\n\t\t\tthis.focus()\r\n\t\t}\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\ttext_value : undefined,\r\n\t\t\t// For `aria-expanded`.\r\n\t\t\tisExpanded : false\r\n\t\t})\r\n\r\n\t\t// `onChange` fires on calendar day `click`\r\n\t\t// but the `value` hasn't neccessarily been updated yet,\r\n\t\t// therefore, say, if `value` was not set\r\n\t\t// and a user selects a day in the calendar\r\n\t\t// then the `value` is technically still `undefined`\r\n\t\t// so can't just set `state.text_value = formatDate(value)` here.\r\n\t\t//\r\n\t\t// Analogous, `setState({ text_value })` has been called\r\n\t\t// in calendar day `onClick` handler but `state.text_value`\r\n\t\t// hasn't neccessarily been updated yet.\r\n\t\t//\r\n\t\t// Still must validate (recompute) `text_value`\r\n\t\t// upon expanding the `<DatePicker/>`, for example, on `<input/>` blur\r\n\t\t// in cases when a user manually typed in an incomplete date and then tabbed away.\r\n\t}\r\n\r\n\tonContainerKeyDown = (event) =>\r\n\t{\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tswitch (event.keyCode)\r\n\t\t{\r\n\t\t\t// \"Escape\".\r\n\t\t\t//\r\n\t\t\t// Collapse.\r\n\t\t\t//\r\n\t\t\t// Maybe add this kind of support for \"Escape\" key in some future:\r\n\t\t\t//  hiding the item list, cancelling current item selection process\r\n\t\t\t//  and restoring the selection present before the item list was toggled.\r\n\t\t\t//\r\n\t\t\tcase 27:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\t// Collapse the list if it's expanded.\r\n\t\t\t\treturn this.collapse()\r\n\r\n\t\t\t// On \"Up\" arrow.\r\n\t\t\tcase 38:\r\n\t\t\t// On \"Down\" arrow.\r\n\t\t\tcase 40:\r\n\t\t\t\treturn event.preventDefault()\r\n\t\t}\r\n\t}\r\n\r\n\tonInputKeyDown = (event) =>\r\n\t{\r\n\t\tconst { onKeyDown } = this.props\r\n\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tswitch (event.keyCode)\r\n\t\t{\r\n\t\t\t// On \"Enter\".\r\n\t\t\tcase 13:\r\n\t\t\t\tif (this.isExpanded())\r\n\t\t\t\t{\r\n\t\t\t\t\t// Don't \"prevent default\" here\r\n\t\t\t\t\t// in order for a user to be able\r\n\t\t\t\t\t// to submit an enclosing form on \"Enter\".\r\n\t\t\t\t\tthis.collapse()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\r\n\t\t\t// On Spacebar.\r\n\t\t\tcase 32:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\treturn this.onToggleButtonClick()\r\n\r\n\t\t\t// On \"Up\" arrow.\r\n\t\t\tcase 38:\r\n\t\t\t\t// Collapse the calendar (if expanded).\r\n\t\t\t\tif (this.isExpanded())\r\n\t\t\t\t{\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\tthis.collapse()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\r\n\t\t\t// On \"Down\" arrow.\r\n\t\t\tcase 40:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\t// Expand the calendar (if collapsed).\r\n\t\t\t\tif (this.isExpanded()) {\r\n\t\t\t\t\tthis.focusCalendar()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.expand().then(this.focusCalendar)\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\tonInputChange = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tonChange,\r\n\t\t\tvalue: previous_value,\r\n\t\t\tformat,\r\n\t\t\tnoon,\r\n\t\t\tutc,\r\n\t\t\tdisabledDays\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// Extract `value` from the argument\r\n\t\t// of this `onChange` listener\r\n\t\t// (for convenience)\r\n\r\n\t\tlet value = event\r\n\r\n\t\tif (event.target !== undefined)\r\n\t\t{\r\n\t\t\tvalue = event.target.value\r\n\t\t}\r\n\r\n\t\tvalue = value.trim()\r\n\r\n\t\t// When the date is erased, reset it.\r\n\t\tif (!value)\r\n\t\t{\r\n\t\t\t// Call `onChange` only if `value` did actually change\r\n\t\t\tif (previous_value)\r\n\t\t\t{\r\n\t\t\t\tonChange(undefined)\r\n\t\t\t}\r\n\r\n\t\t\treturn this.setState({ text_value: '' })\r\n\t\t}\r\n\r\n\t\tvalue = trimInvalidPart(value, format)\r\n\r\n\t\tconst selected_day = parseDate(value, format, noon, utc)\r\n\r\n\t\t// If the date input is unparseable,\r\n\t\t// or if it's one of the disabled days,\r\n\t\t// then don't change the selected date.\r\n\t\tif (!selected_day ||\r\n\t\t\tdisabledDays && ModifiersUtils.dayMatchesModifier(selected_day, disabledDays))\r\n\t\t{\r\n\t\t\treturn this.setState({ text_value: value })\r\n\t\t}\r\n\r\n\t\t// Call `onChange` only if `value` did actually change\r\n\t\tif (!previous_value || previous_value.getTime() !== selected_day.getTime())\r\n\t\t{\r\n\t\t\tonChange(selected_day)\r\n\t\t}\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\ttext_value: value\r\n\t\t},\r\n\t\t() => this.calendar && this.calendar.showMonth(selected_day))\r\n\t}\r\n\r\n\tonDayClick = (selected_day, { disabled }) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tformat,\r\n\t\t\tonChange,\r\n\t\t\tvalue: previous_value,\r\n\t\t\tnoon,\r\n\t\t\tutc\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// If the day clicked is disabled then do nothing.\r\n\t\tif (disabled)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// https://github.com/gpbl/react-day-picker/issues/473\r\n\t\t// By default the `selected_day` has time\r\n\t\t// set to `12:00` of the current time zone.\r\n\t\t// These extra 12 hours do make sense and\r\n\t\t// do help make things less weird.\r\n\t\t//\r\n\t\t// These extra 12 hours are a hack to make things\r\n\t\t// a little bit less weird when rendering parsed dates.\r\n\t\t// E.g. if a date `Jan 1st, 2017` gets parsed as\r\n\t\t// `Jan 1st, 2017, 00:00 UTC+0` (England) then when displayed in the US\r\n\t\t// it would show up as `Dec 31st, 2016, 19:00 UTC-05` (Austin, Texas).\r\n\t\t// That would be weird for a website user.\r\n\t\t// Therefore this extra 12-hour padding is added\r\n\t\t// to compensate for the most weird cases like this\r\n\t\t// for adjacent countries / neighbours / same continent countries.\r\n\t\t//\r\n\t\t// So `selected_day` is in the user's time zone and the time is `12:00`.\r\n\r\n\t\tif (!noon)\r\n\t\t{\r\n\t\t\t// Here I strip those 12 hours from the `selected_day`\r\n\t\t\t// so the time becomes `00:00` in the user's time zone.\r\n\t\t\t//\r\n\t\t\t// (`selected_day` is the date in the user's time zone)\r\n\t\t\t// (`selected_day.getDate()` returns the day in the user's time zone)\r\n\t\t\t// (`new Date(year, month, day)` creates a date in the user's time zone)\r\n\t\t\t//\r\n\t\t\tselected_day = new Date(selected_day.getFullYear(), selected_day.getMonth(), selected_day.getDate())\r\n\t\t}\r\n\r\n\t\tif (utc)\r\n\t\t{\r\n\t\t\t// Converts timezone to UTC while preserving the same time\r\n\t\t\tselected_day = convert_to_utc_timezone(selected_day)\r\n\t\t}\r\n\r\n\t\t// `onChange` fires but the `value`\r\n\t\t// hasn't neccessarily been updated yet.\r\n\t\t//\r\n\t\t// Call `onChange` only if `value` did actually change.\r\n\t\t//\r\n\t\tif (!previous_value || previous_value.getTime() !== selected_day.getTime())\r\n\t\t{\r\n\t\t\tonChange(selected_day)\r\n\t\t}\r\n\r\n\t\t// Hide the calendar\r\n\t\tthis.collapse()\r\n\r\n\t\t// Focus the `<input/>`.\r\n\t\t// (if not in \"input overlay\" mode for mobile devices).\r\n\t\tif (getComputedStyle(this.inputOverlay).display === 'none')\r\n\t\t{\r\n\t\t\tthis.focusAfterDaySelected = true\r\n\t\t\tthis.input.focus()\r\n\r\n\t\t\t// For some reason in IE 11 `onFocus` on `<input/>` is not called immediately.\r\n\t\t\tif (isInternetExplorer()) {\r\n\t\t\t\tsetTimeout(() => this.focusAfterDaySelected = false, 0)\r\n\t\t\t} else {\r\n\t\t\t\tthis.focusAfterDaySelected = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// onCalendarKeyDown = (event) =>\r\n\t// {\r\n\t// \tswitch (event)\r\n\t// \t{\r\n\t// \t\t// The next year is selected on \"Up\" arrow,\r\n\t// \t\t// so `.preventDefault()` it to prevent page scrolling.\r\n\t// \t\t// https://github.com/gpbl/react-day-picker/issues/273\r\n\t// \t\tcase 38:\r\n\t// \t\t\tevent.preventDefault()\r\n\t// \t\t\treturn\r\n\t//\r\n\t// \t\t// The previous year is selected on \"Down\" arrow,\r\n\t// \t\t// so `.preventDefault()` it to prevent page scrolling.\r\n\t// \t\t// https://github.com/gpbl/react-day-picker/issues/273\r\n\t// \t\tcase 40:\r\n\t// \t\t\tevent.preventDefault()\r\n\t// \t\t\treturn\r\n\t// \t}\r\n\t// }\r\n\r\n\tonMonthChange = (month) =>\r\n\t{\r\n\t\tthis.setState({ month })\r\n\t}\r\n\r\n\tonBlur = (event) =>\r\n\t{\r\n\t\tclearTimeout(this.blurTimer)\r\n\t\tthis.blurTimer = onBlur(event, this.onFocusOut, () => this.container, () => this.input, this.preventBlur)\r\n\t}\r\n\r\n\tonFocusOut = (event) =>\r\n\t{\r\n\t\tconst { onBlur, value } = this.props\r\n\r\n\t\t// `window.rruiCollapseOnFocusOut` can be used\r\n\t\t// for debugging expandable contents.\r\n\t\tif (window.rruiCollapseOnFocusOut !== false) {\r\n\t\t\tthis.focusingOut = true\r\n\t\t\tthis.collapse()\r\n\t\t\tthis.focusingOut = undefined\r\n\t\t}\r\n\r\n\t\tif (onBlur) {\r\n\t\t\tonBlurForReduxForm(onBlur, event, value)\r\n\t\t}\r\n\t}\r\n\r\n\tpreventBlur = () =>\r\n\t{\r\n\t\t// A hack for iOS when it collapses\r\n\t\t// the calendar after selecting a year/month.\r\n\t\t// When selecting a year/month and pressing \"Done\" button\r\n\t\t// iOS triggers `blur` event on the corresponding `<select/>`\r\n\t\t// which in turn causes the calendar to collapse.\r\n\t\t// This workaround prevents that by re-focusing the calendar.\r\n\t\tif (this._userHasJustChangedYearOrMonth)\r\n\t\t{\r\n\t\t\tthis.focusCalendar()\r\n\t\t\treturn true\r\n\t\t}\r\n\t}\r\n\r\n\tonToggleButtonClick = (event) => {\r\n\t\tthis.toggle().then(() => {\r\n\t\t\tconst { isExpanded } = this.state\r\n\t\t\tif (isExpanded) {\r\n\t\t\t\tthis.focusCalendar()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tclearTimeout(this.blurTimer)\r\n\t}\r\n\r\n\tgetContainerNode = () => this.container\r\n\tstoreContainerNode = (node) => this.container = node\r\n\tstoreExpandableRef = (ref) => this.expandable = ref\r\n\tstoreCalendarComponent = (ref) => this.calendar = ref\r\n\tstoreInputOverlayNode = (node) => this.inputOverlay = node\r\n\tstoreInputNode = (node) => this.input = node\r\n\tstoreInputContainerNode = (node) => this.inputContainer = node\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tid,\r\n\t\t\tformat,\r\n\t\t\tvalue,\r\n\t\t\terror,\r\n\t\t\tindicateInvalid,\r\n\t\t\tdisabledDays,\r\n\t\t\tselectYearsIntoPast,\r\n\t\t\tselectYearsIntoFuture,\r\n\t\t\tlocale,\r\n\t\t\tlocaleUtils,\r\n\t\t\tmonths,\r\n\t\t\tweekdaysShort,\r\n\t\t\tweekdaysLong,\r\n\t\t\tfirstDayOfWeek,\r\n\t\t\tdisabled,\r\n\t\t\trequired,\r\n\t\t\tlabel,\r\n\t\t\tplaceholder,\r\n\t\t\ttabIndex,\r\n\t\t\twaitForKeyboardSlideIn,\r\n\t\t\tkeyboardSlideInAnimationDuration,\r\n\t\t\tbuttonAriaLabel,\r\n\t\t\tcloseLabel,\r\n\t\t\tcloseButtonIcon : CloseButtonIcon,\r\n\t\t\ticon,\r\n\t\t\tclassName,\r\n\t\t\tstyle\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\ttext_value,\r\n\t\t\tisExpanded,\r\n\t\t\tmonth\r\n\t\t}\r\n\t\t= this.state\r\n\r\n\t\t// `<input type=\"date\"/>` renders a browser-specific date picker\r\n\t\t// which can not be turned off using a simple HTML attribute\r\n\t\t// and also date format is not customizable,\r\n\t\t// therefore just using `<input type=\"text\"/>` here\r\n\r\n\t\t// \"MM/DD/YYYY\"\r\n\t\tconst formatHint = typeof format === 'string' ? format : undefined\r\n\r\n\t\tlet captionElement\r\n\r\n\t\tif (selectYearsIntoPast || selectYearsIntoFuture)\r\n\t\t{\r\n\t\t\tcaptionElement = (\r\n\t\t\t\t<YearMonthSelect\r\n\t\t\t\t\tfocus={ this.focusCalendar }\r\n\t\t\t\t\tuserHasJustChangedYearOrMonth={ this.userHasJustChangedYearOrMonth }\r\n\t\t\t\t\tselectedDay={ value }\r\n\t\t\t\t\tonChange={ this.onMonthChange }\r\n\t\t\t\t\tselectYearsIntoPast={ selectYearsIntoPast }\r\n\t\t\t\t\tselectYearsIntoFuture={ selectYearsIntoFuture } />\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<WithError\r\n\t\t\t\tsetRef={this.storeContainerNode}\r\n\t\t\t\terror={error}\r\n\t\t\t\tindicateInvalid={indicateInvalid}\r\n\t\t\t\tonKeyDown={this.onContainerKeyDown}\r\n\t\t\t\tonBlur={this.onBlur}\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tclassName={classNames(className, 'rrui__date-picker', {\r\n\t\t\t\t\t'rrui__date-picker--disabled' : disabled\r\n\t\t\t\t})}>\r\n\r\n\t\t\t\t{/* Date input */}\r\n\t\t\t\t<TextInput\r\n\t\t\t\t\tid={ id }\r\n\t\t\t\t\tcontainerRef={ this.storeInputContainerNode }\r\n\t\t\t\t\tinputRef={ this.storeInputNode }\r\n\t\t\t\t\trequired={ required }\r\n\t\t\t\t\terror={ error }\r\n\t\t\t\t\tindicateInvalid={ indicateInvalid }\r\n\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\tplaceholder={ label ? placeholder : placeholder || formatHint }\r\n\t\t\t\t\taria-label={ label ? `${label}: ${placeholder || formatHint}` : undefined }\r\n\t\t\t\t\ttabIndex={ tabIndex }\r\n\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\tvalue={ text_value !== undefined ? text_value : formatDate(value, format) }\r\n\t\t\t\t\tonKeyDown={ this.onInputKeyDown }\r\n\t\t\t\t\tonChange={ this.onInputChange }\r\n\t\t\t\t\tonFocus={ this.onInputFocus }\r\n\t\t\t\t\tonClick={ this.expand }>\r\n\r\n\t\t\t\t\t{/* This layer can intercept taps on mobile devices\r\n\t\t\t\t\t    to prevent the keyboard from showing\r\n\t\t\t\t\t    when the date picker is in fullscreen mode.\r\n\t\t\t\t\t    `tabIndex={-1}` is to prevent focus-out/focus-in jitter on click. */}\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tref={ this.storeInputOverlayNode }\r\n\t\t\t\t\t\tonClick={ this.onToggleButtonClick }\r\n\t\t\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\t\t\tclassName=\"rrui__date-picker__input-overlay\"/>\r\n\r\n\t\t\t\t\t{/* Calendar icon which toggles the calendar. */}\r\n\t\t\t\t\t{/* `aria-haspopup`: https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup */}\r\n\t\t\t\t\t{/* WAI-ARIA 1.1 is not yet supported, so not using `aria-haspopup=\"grid\"`. */}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={this.onToggleButtonClick}\r\n\t\t\t\t\t\ttabIndex={buttonAriaLabel ? undefined : -1}\r\n\t\t\t\t\t\taria-haspopup={undefined && 'grid'}\r\n\t\t\t\t\t\taria-expanded={isExpanded ? true : false}\r\n\t\t\t\t\t\taria-label={buttonAriaLabel}\r\n\t\t\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t\t\t'rrui__button-reset',\r\n\t\t\t\t\t\t\t'rrui__outline',\r\n\t\t\t\t\t\t\t'rrui__date-picker__icon', {\r\n\t\t\t\t\t\t\t\t'rrui__date-picker__icon--hidden': !buttonAriaLabel && !icon\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)}>\r\n\t\t\t\t\t\t{typeof icon === 'function' ? icon() : DEFAULT_CALENDAR_ICON()}\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t{/* <DayPicker/> doesn't support `style` property */}\r\n\t\t\t\t\t<Expandable\r\n\t\t\t\t\t\tref={ this.storeExpandableRef }\r\n\t\t\t\t\t\tonExpand={ this.onExpand }\r\n\t\t\t\t\t\tonExpanded={ this.onExpanded }\r\n\t\t\t\t\t\tonCollapse={ this.onCollapse }\r\n\t\t\t\t\t\tonFocusOut={ this.onBlur }\r\n\t\t\t\t\t\tgetTogglerNode={ this.getContainerNode }\r\n\t\t\t\t\t\tscrollIntoViewDelay={ waitForKeyboardSlideIn ? keyboardSlideInAnimationDuration : undefined }>\r\n\r\n\t\t\t\t\t\t<DayPicker\r\n\t\t\t\t\t\t\tref={ this.storeCalendarComponent }\r\n\t\t\t\t\t\t\tmonth={ month }\r\n\t\t\t\t\t\t\tonMonthChange={ this.onMonthChange }\r\n\t\t\t\t\t\t\tlocale={ locale }\r\n\t\t\t\t\t\t\tlocaleUtils={ localeUtils }\r\n\t\t\t\t\t\t\tmonths={ months }\r\n\t\t\t\t\t\t\tweekdaysLong={ weekdaysLong }\r\n\t\t\t\t\t\t\tweekdaysShort={ weekdaysShort }\r\n\t\t\t\t\t\t\tfirstDayOfWeek={ firstDayOfWeek }\r\n\t\t\t\t\t\t\tonDayClick={ this.onDayClick }\r\n\t\t\t\t\t\t\tselectedDays={ normalizeDate(value) }\r\n\t\t\t\t\t\t\tdisabledDays={ disabledDays }\r\n\t\t\t\t\t\t\tcaptionElement={ captionElement }\r\n\t\t\t\t\t\t\tclassName=\"rrui__date-picker__calendar\" />\r\n\t\t\t\t\t</Expandable>\r\n\t\t\t\t</TextInput>\r\n\t\t\t</WithError>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst iconStyle = {\r\n\twidth  : '100%',\r\n\theight : '100%',\r\n\tfill   : 'currentColor'\r\n}\r\n\r\n// Doesn't work.\r\n// https://github.com/gpbl/react-day-picker/issues/841\r\n//\r\n// classNames={ REACT_DAY_PICKER_CLASS_NAMES }\r\n//\r\n// // Default `react-day-picker` CSS class names.\r\n// // Should have been exported from `react-day-picker`.\r\n// // https://github.com/gpbl/react-day-picker/blob/master/src/classNames.js\r\n// // Can change in future versions of `react-day-picker`.\r\n// const REACT_DAY_PICKER_DEFAULT_CLASS_NAMES = {\r\n// \tcontainer: 'DayPicker',\r\n// \twrapper: 'DayPicker-wrapper',\r\n// \tinteractionDisabled: 'DayPicker--interactionDisabled',\r\n// \tmonths: 'DayPicker-Months',\r\n// \tmonth: 'DayPicker-Month',\r\n// \tnavBar: 'DayPicker-NavBar',\r\n// \tnavButtonPrev: 'DayPicker-NavButton DayPicker-NavButton--prev',\r\n// \tnavButtonNext: 'DayPicker-NavButton DayPicker-NavButton--next',\r\n// \tnavButtonInteractionDisabled: 'DayPicker-NavButton--interactionDisabled',\r\n// \tcaption: 'DayPicker-Caption',\r\n// \tweekdays: 'DayPicker-Weekdays',\r\n// \tweekdaysRow: 'DayPicker-WeekdaysRow',\r\n// \tweekday: 'DayPicker-Weekday',\r\n// \tbody: 'DayPicker-Body',\r\n// \tweek: 'DayPicker-Week',\r\n// \tweekNumber: 'DayPicker-WeekNumber',\r\n// \tday: 'DayPicker-Day',\r\n// \tfooter: 'DayPicker-Footer',\r\n// \ttodayButton: 'DayPicker-TodayButton',\r\n// \t// default modifiers\r\n// \ttoday: 'today',\r\n// \tselected: 'selected',\r\n// \tdisabled: 'disabled',\r\n// \toutside: 'outside',\r\n// }\r\n//\r\n// const REACT_DAY_PICKER_CLASS_NAMES = {\r\n// \t...REACT_DAY_PICKER_DEFAULT_CLASS_NAMES,\r\n// \t/* `.DayPicker-wrapper` is a `<div/>` wrapping the calendar.\r\n// \t   It gets focused upon expanding which causes an outline.\r\n// \t   That outline can be safely removed because it doesn't aid accesiblity. */\r\n// \twrapper: REACT_DAY_PICKER_DEFAULT_CLASS_NAMES.wrapper + ' rrui__outline',\r\n// \t/* Calendar days have `background-color` on `:focus`.\r\n// \t   Therefore their `outline` can be safely removed. */\r\n// \tday: REACT_DAY_PICKER_DEFAULT_CLASS_NAMES.day + ' rrui__outline',\r\n// \t/* Previous/Next month buttons have `background-color` on `:focus`.\r\n// \t   Therefore their `outline` can be safely removed. */\r\n// \tnavButtonPrev: REACT_DAY_PICKER_DEFAULT_CLASS_NAMES.navButtonPrev + ' rrui__outline',\r\n// \tnavButtonNext: REACT_DAY_PICKER_DEFAULT_CLASS_NAMES.navButtonNext + ' rrui__outline'\r\n// }\r\n\r\n// Default calendar icon\r\nconst DEFAULT_CALENDAR_ICON = () => (\r\n\t<svg style={iconStyle} viewBox=\"0 0 32 32\">\r\n\t\t<path d=\" M2 2 L10 2 L10 10 L2 10z M12 2 L20 2 L20 10 L12 10z M22 2 L30 2 L30 10 L22 10z M2 12 L10 12 L10 20 L2 20z M12 12 L20 12 L20 20 L12 20z M22 12 L30 12 L30 20 L22 20z M2 22 L10 22 L10 30 L2 30z M12 22 L20 22 L20 30 L12 30z M22 22 L30 22 L30 30 L22 30z \"/>\r\n\t</svg>\r\n)"]}